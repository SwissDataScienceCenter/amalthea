# API Reference

Packages:

- [amalthea.dev/v1alpha1](#amaltheadevv1alpha1)

# amalthea.dev/v1alpha1

Resource Types:

- [JupyterServer](#jupyterserver)




## JupyterServer
<sup><sup>[↩ Parent](#amaltheadevv1alpha1 )</sup></sup>








<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Description</th>
            <th>Required</th>
        </tr>
    </thead>
    <tbody><tr>
      <td><b>apiVersion</b></td>
      <td>string</td>
      <td>amalthea.dev/v1alpha1</td>
      <td>true</td>
      </tr>
      <tr>
      <td><b>kind</b></td>
      <td>string</td>
      <td>JupyterServer</td>
      <td>true</td>
      </tr>
      <tr>
      <td><b><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.20/#objectmeta-v1-meta">metadata</a></b></td>
      <td>object</td>
      <td>Refer to the Kubernetes API documentation for the fields of the `metadata` field.</td>
      <td>true</td>
      </tr><tr>
        <td><b><a href="#jupyterserverspec">spec</a></b></td>
        <td>object</td>
        <td>
          User defined specification for a JupyterServer custom resource.<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b>status</b></td>
        <td>object</td>
        <td>
          A field for Jupyter Server status information, do not modify.<br/>
          <br/>
            <i>Default</i>: map[children:map[] mainPod:map[]]<br/>
        </td>
        <td>false</td>
      </tr></tbody>
</table>


### JupyterServer.spec
<sup><sup>[↩ Parent](#jupyterserver)</sup></sup>



User defined specification for a JupyterServer custom resource.

<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Description</th>
            <th>Required</th>
        </tr>
    </thead>
    <tbody><tr>
        <td><b><a href="#jupyterserverspecauth">auth</a></b></td>
        <td>object</td>
        <td>
          Settings defining access control to the jupyter server.<br/>
          <br/>
            <i>Default</i>: map[]<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b><a href="#jupyterserverspecculling">culling</a></b></td>
        <td>object</td>
        <td>
          Options about culling idle servers<br/>
          <br/>
            <i>Default</i>: map[]<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b><a href="#jupyterserverspecjupyterserver">jupyterServer</a></b></td>
        <td>object</td>
        <td>
          Configuration options (such as image to run) for the Jupyter server. See also https://jupyter-server.readthedocs.io/en/latest/other/full-config.html<br/>
          <br/>
            <i>Default</i>: map[]<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b><a href="#jupyterserverspecpatchesindex">patches</a></b></td>
        <td>[]object</td>
        <td>
          Patches to be applied to the created child resources after template rendering. Currently json patches and json merge patches are supported.<br/>
          <br/>
            <i>Default</i>: []<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b><a href="#jupyterserverspecrouting">routing</a></b></td>
        <td>object</td>
        <td>
          Settings related to how the jupyter server will be exposed outside of the cluster.<br/>
          <br/>
            <i>Default</i>: map[]<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b><a href="#jupyterserverspecstorage">storage</a></b></td>
        <td>object</td>
        <td>
          Settings to define storage to back the jupyter server.<br/>
          <br/>
            <i>Default</i>: map[]<br/>
        </td>
        <td>false</td>
      </tr></tbody>
</table>


### JupyterServer.spec.auth
<sup><sup>[↩ Parent](#jupyterserverspec)</sup></sup>



Settings defining access control to the jupyter server.

<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Description</th>
            <th>Required</th>
        </tr>
    </thead>
    <tbody><tr>
        <td><b><a href="#jupyterserverspecauthoidc">oidc</a></b></td>
        <td>object</td>
        <td>
          Configuration for an OpenID connect provider to be used for access control to the jupyter server. Useful information can be found in the oauth2 proxy docs: https://oauth2-proxy.github.io/oauth2-proxy/docs/configuration/overview/<br/>
          <br/>
            <i>Default</i>: map[]<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b>token</b></td>
        <td>string</td>
        <td>
          A token that will be passed to the `--ServerApp.token` option when running the Jupyter server and needed when first accessing the Jupyter server. The options are:
  - By leaving this field empty, a token will be autogenerated and
added under the key `ServerApp.token` to the secret which is created as a child of the custom resource object.
  - Setting the token to an empty string "" runs the Jupyter server
container itself without any authentication. This is recommended when enabling OIDC as authentication and authorization are then handled by the dedicated plugins.
  - Set an actual value here. Note that this string will be stored
in clear text as part of the custom resource object. This option is mostly useful for dev purposes.<br/>
        </td>
        <td>false</td>
      </tr></tbody>
</table>


### JupyterServer.spec.auth.oidc
<sup><sup>[↩ Parent](#jupyterserverspecauth)</sup></sup>



Configuration for an OpenID connect provider to be used for access control to the jupyter server. Useful information can be found in the oauth2 proxy docs: https://oauth2-proxy.github.io/oauth2-proxy/docs/configuration/overview/

<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Description</th>
            <th>Required</th>
        </tr>
    </thead>
    <tbody><tr>
        <td><b>authorizedEmails</b></td>
        <td>[]string</td>
        <td>
          List of users (identified by Email address read from the "email" OIDC claim) which are allowed to access this Jupyter session. This list is stored as a file and passed to the `--authenticated-emails-file` option (see https://oauth2-proxy.github.io/oauth2-proxy/docs/configuration/overview#command-line-options).<br/>
          <br/>
            <i>Default</i>: []<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b>authorizedGroups</b></td>
        <td>[]string</td>
        <td>
          List of groups of users (read from the "groups" OIDC claim) which are allowed to access this Jupyter session. This list passed to the `--allowed-group` option (see https://oauth2-proxy.github.io/oauth2-proxy/docs/configuration/overview#command-line-options).<br/>
          <br/>
            <i>Default</i>: []<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b>clientId</b></td>
        <td>string</td>
        <td>
          The client id of the application registered with the OIDC provider, see `--client-id` here: https://oauth2-proxy.github.io/oauth2-proxy/docs/configuration/overview/#command-line-options<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b><a href="#jupyterserverspecauthoidcclientsecret">clientSecret</a></b></td>
        <td>object</td>
        <td>
          The client secret of the application registered with the OIDC provider. This secret can be given here explicitly as string or through a reference to an existing secret. Using the secret reference is the preferred option because it avoids storing the secret in clear text on the custom resource specification. See `--client-secret` here: https://oauth2-proxy.github.io/oauth2-proxy/docs/configuration/overview/#command-line-options<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b>enabled</b></td>
        <td>boolean</td>
        <td>
          <br/>
          <br/>
            <i>Default</i>: false<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b>issuerUrl</b></td>
        <td>string</td>
        <td>
          Issuer URL of the OIDC provider, see `--oidc-issuer-url` here: https://oauth2-proxy.github.io/oauth2-proxy/docs/configuration/overview/#command-line-options<br/>
        </td>
        <td>false</td>
      </tr></tbody>
</table>


### JupyterServer.spec.auth.oidc.clientSecret
<sup><sup>[↩ Parent](#jupyterserverspecauthoidc)</sup></sup>



The client secret of the application registered with the OIDC provider. This secret can be given here explicitly as string or through a reference to an existing secret. Using the secret reference is the preferred option because it avoids storing the secret in clear text on the custom resource specification. See `--client-secret` here: https://oauth2-proxy.github.io/oauth2-proxy/docs/configuration/overview/#command-line-options

<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Description</th>
            <th>Required</th>
        </tr>
    </thead>
    <tbody><tr>
        <td><b><a href="#jupyterserverspecauthoidcclientsecretsecretkeyref">secretKeyRef</a></b></td>
        <td>object</td>
        <td>
          A regular reference to the key/secret which holds the client secret of the application registered with the OIDC provider. Note that the secret has to be in the same namespace in which the custom resource object is going to be created.<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b>value</b></td>
        <td>string</td>
        <td>
          The secret provided as a string value.<br/>
        </td>
        <td>false</td>
      </tr></tbody>
</table>


### JupyterServer.spec.auth.oidc.clientSecret.secretKeyRef
<sup><sup>[↩ Parent](#jupyterserverspecauthoidcclientsecret)</sup></sup>



A regular reference to the key/secret which holds the client secret of the application registered with the OIDC provider. Note that the secret has to be in the same namespace in which the custom resource object is going to be created.

<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Description</th>
            <th>Required</th>
        </tr>
    </thead>
    <tbody><tr>
        <td><b>key</b></td>
        <td>string</td>
        <td>
          <br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b>name</b></td>
        <td>string</td>
        <td>
          <br/>
        </td>
        <td>false</td>
      </tr></tbody>
</table>


### JupyterServer.spec.culling
<sup><sup>[↩ Parent](#jupyterserverspec)</sup></sup>



Options about culling idle servers

<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Description</th>
            <th>Required</th>
        </tr>
    </thead>
    <tbody><tr>
        <td><b>failedSecondsThreshold</b></td>
        <td>integer</td>
        <td>
          How long can a server be in failed state before it gets culled. A value of zero indicates that the server cannot be culled due failing.<br/>
          <br/>
            <i>Default</i>: 0<br/>
            <i>Minimum</i>: 0<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b>idleSecondsThreshold</b></td>
        <td>integer</td>
        <td>
          How long should a server be idle for before it is culled. A value of zero indicates that the server should never be culled for inactivity.<br/>
          <br/>
            <i>Default</i>: 0<br/>
            <i>Minimum</i>: 0<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b>maxAgeSecondsThreshold</b></td>
        <td>integer</td>
        <td>
          The maximum allowed age for a session, regardless of whether it is active or not. A value of zero indicates that the server cannot be culled due to its age.<br/>
          <br/>
            <i>Default</i>: 0<br/>
            <i>Minimum</i>: 0<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b>startingSecondsThreshold</b></td>
        <td>integer</td>
        <td>
          How long can a server be in starting state before it gets culled. A value of zero indicates that the server cannot be culled due to starting too long.<br/>
          <br/>
            <i>Default</i>: 0<br/>
            <i>Minimum</i>: 0<br/>
        </td>
        <td>false</td>
      </tr></tbody>
</table>


### JupyterServer.spec.jupyterServer
<sup><sup>[↩ Parent](#jupyterserverspec)</sup></sup>



Configuration options (such as image to run) for the Jupyter server. See also https://jupyter-server.readthedocs.io/en/latest/other/full-config.html

<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Description</th>
            <th>Required</th>
        </tr>
    </thead>
    <tbody><tr>
        <td><b>defaultUrl</b></td>
        <td>string</td>
        <td>
          The default URL to redirect to from '/'. Frequently used values are '/lab' or '/rstudio'. Translates to `--ServerApp.default_url`.<br/>
          <br/>
            <i>Default</i>: /lab<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b>hibernated</b></td>
        <td>boolean</td>
        <td>
          Whether the server is hibernated or not.<br/>
          <br/>
            <i>Default</i>: false<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b>image</b></td>
        <td>string</td>
        <td>
          <br/>
          <br/>
            <i>Default</i>: jupyter/minimal-notebook:latest<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b>resources</b></td>
        <td>object</td>
        <td>
          Regular K8s resource requests, will be set on the main notebook container.<br/>
          <br/>
            <i>Default</i>: map[]<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b>rootDir</b></td>
        <td>string</td>
        <td>
          The absolute path to the root/notebook directory for the jupyter server. Should lead to a subdirectory of or match the path at storage.pvc.mountPath. Translates to `--ServerApp.root_dir`.<br/>
          <br/>
            <i>Default</i>: /home/jovyan/work<br/>
        </td>
        <td>false</td>
      </tr></tbody>
</table>


### JupyterServer.spec.patches[index]
<sup><sup>[↩ Parent](#jupyterserverspec)</sup></sup>





<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Description</th>
            <th>Required</th>
        </tr>
    </thead>
    <tbody><tr>
        <td><b>patch</b></td>
        <td>JSON</td>
        <td>
          <br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b>type</b></td>
        <td>enum</td>
        <td>
          <br/>
          <br/>
            <i>Enum</i>: application/json-patch+json, application/merge-patch+json<br/>
        </td>
        <td>false</td>
      </tr></tbody>
</table>


### JupyterServer.spec.routing
<sup><sup>[↩ Parent](#jupyterserverspec)</sup></sup>



Settings related to how the jupyter server will be exposed outside of the cluster.

<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Description</th>
            <th>Required</th>
        </tr>
    </thead>
    <tbody><tr>
        <td><b>host</b></td>
        <td>string</td>
        <td>
          Host under which the server will be available (eg myserver.example.com), should not include the schema.<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b>ingressAnnotations</b></td>
        <td>object</td>
        <td>
          <br/>
          <br/>
            <i>Default</i>: map[]<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b>path</b></td>
        <td>string</td>
        <td>
          Optionally make the server available under some path.<br/>
          <br/>
            <i>Default</i>: /<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b><a href="#jupyterserverspecroutingtls">tls</a></b></td>
        <td>object</td>
        <td>
          Settings for defining TLS termination by the ingress.<br/>
          <br/>
            <i>Default</i>: map[]<br/>
        </td>
        <td>false</td>
      </tr></tbody>
</table>


### JupyterServer.spec.routing.tls
<sup><sup>[↩ Parent](#jupyterserverspecrouting)</sup></sup>



Settings for defining TLS termination by the ingress.

<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Description</th>
            <th>Required</th>
        </tr>
    </thead>
    <tbody><tr>
        <td><b>enabled</b></td>
        <td>boolean</td>
        <td>
          <br/>
          <br/>
            <i>Default</i>: false<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b>secretName</b></td>
        <td>string</td>
        <td>
          The name of the K8s TLS secret. Might be pre-existing in the cluster or created under that name by a tool like cert manager when needed.<br/>
        </td>
        <td>false</td>
      </tr></tbody>
</table>


### JupyterServer.spec.storage
<sup><sup>[↩ Parent](#jupyterserverspec)</sup></sup>



Settings to define storage to back the jupyter server.

<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Description</th>
            <th>Required</th>
        </tr>
    </thead>
    <tbody><tr>
        <td><b><a href="#jupyterserverspecstoragepvc">pvc</a></b></td>
        <td>object</td>
        <td>
          <br/>
          <br/>
            <i>Default</i>: map[]<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b>size</b></td>
        <td>int or string</td>
        <td>
          Size of the PVC or sizeLimit of the emptyDir volume which backs the session respectively.<br/>
          <br/>
            <i>Default</i>: 100Mi<br/>
        </td>
        <td>false</td>
      </tr></tbody>
</table>


### JupyterServer.spec.storage.pvc
<sup><sup>[↩ Parent](#jupyterserverspecstorage)</sup></sup>





<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Description</th>
            <th>Required</th>
        </tr>
    </thead>
    <tbody><tr>
        <td><b>enabled</b></td>
        <td>boolean</td>
        <td>
          Whether a PVC should be used to back the session. Defaults to 'false' in which case an emptyDir volume will be used.<br/>
          <br/>
            <i>Default</i>: false<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b>mountPath</b></td>
        <td>string</td>
        <td>
          The absolute path to the location where the PVC should be mounted in the user session pod.<br/>
          <br/>
            <i>Default</i>: /home/jovyan/work<br/>
        </td>
        <td>false</td>
      </tr><tr>
        <td><b>storageClassName</b></td>
        <td>string</td>
        <td>
          Storage class to be used for the PVC. If left empty, the default storage class defined for the cluster will be used.<br/>
        </td>
        <td>false</td>
      </tr></tbody>
</table>